{"ast":null,"code":"import _slicedToArray from\"/Users/hung-hsilin/Documents/LaiProject/doordash-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Drawer,List,message,Typography}from\"antd\";import{useEffect,useState}from\"react\";import{checkout,getCart}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Text=Typography.Text;var MyCart=function MyCart(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cartVisible=_useState2[0],setCartVisible=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),cartData=_useState4[0],setCartData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),checking=_useState8[0],setChecking=_useState8[1];useEffect(function(){if(!cartVisible){return;}setLoading(true);getCart().then(function(data){setCartData(data);}).catch(function(err){message.error(err.message);}).finally(function(){setLoading(false);});},[cartVisible]);var onCheckOut=function onCheckOut(){setChecking(true);checkout().then(function(){message.success(\"Successfully checkout\");setCartVisible(false);}).catch(function(err){message.error(err.message);}).finally(function(){setChecking(false);});};var onCloseDrawer=function onCloseDrawer(){setCartVisible(false);};var onOpenDrawer=function onOpenDrawer(){setCartVisible(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",shape:\"round\",onClick:onOpenDrawer,children:\"Cart\"}),/*#__PURE__*/_jsx(Drawer,{title:\"My Shopping Cart\",onClose:onCloseDrawer,visible:cartVisible,width:520,footer:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Total price: $\".concat(cartData===null||cartData===void 0?void 0:cartData.totalPrice)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{onClick:onCloseDrawer,style:{marginRight:8},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:onCheckOut,type:\"primary\",loading:checking,disabled:loading||(cartData===null||cartData===void 0?void 0:cartData.orderItemList.length)===0,children:\"Checkout\"})]})]}),children:/*#__PURE__*/_jsx(List,{loading:loading,itemLayout:\"horizontal\",dataSource:cartData===null||cartData===void 0?void 0:cartData.orderItemList,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:item.menuItem.name,description:\"$\".concat(item.price)})});}})})]});};export default MyCart;","map":{"version":3,"sources":["/Users/hung-hsilin/Documents/LaiProject/doordash-app/src/components/MyCart.js"],"names":["Button","Drawer","List","message","Typography","useEffect","useState","checkout","getCart","Text","MyCart","cartVisible","setCartVisible","cartData","setCartData","loading","setLoading","checking","setChecking","then","data","catch","err","error","finally","onCheckOut","success","onCloseDrawer","onOpenDrawer","display","justifyContent","totalPrice","marginRight","orderItemList","length","item","menuItem","name","price"],"mappings":"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","sourcesContent":["import { Button, Drawer, List, message, Typography } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { checkout, getCart } from \"../utils\";\n\nconst { Text } = Typography;\n\nconst MyCart = () => {\n    const [cartVisible, setCartVisible] = useState(false);\n    const [cartData, setCartData] = useState();\n    const [loading, setLoading] = useState(false);\n    const [checking, setChecking] = useState(false);\n\n    useEffect(() => {\n        if (!cartVisible) {\n            return;\n        }\n\n        setLoading(true);\n        getCart()\n            .then((data) => {\n                setCartData(data);\n            })\n            .catch((err) => {\n                message.error(err.message);\n            })\n            .finally(() => {\n                setLoading(false);\n            });\n    }, [cartVisible]);\n\n    const onCheckOut = () => {\n        setChecking(true);\n        checkout()\n            .then(() => {\n                message.success(\"Successfully checkout\");\n                setCartVisible(false);\n            })\n            .catch((err) => {\n                message.error(err.message);\n            })\n            .finally(() => {\n                setChecking(false);\n            });\n    };\n\n    const onCloseDrawer = () => {\n        setCartVisible(false);\n    };\n\n    const onOpenDrawer = () => {\n        setCartVisible(true);\n    };\n\n    return (\n        <>\n            <Button type=\"primary\" shape=\"round\" onClick={onOpenDrawer}>\n                Cart\n            </Button>\n            <Drawer\n                title=\"My Shopping Cart\"\n                onClose={onCloseDrawer}\n                visible={cartVisible}\n                width={520}\n                footer={\n                    <div\n                        style={{\n                            display: \"flex\",\n                            justifyContent: \"space-between\",\n                        }}\n                    >\n                        <Text strong={true}>{`Total price: $${cartData?.totalPrice}`}</Text>\n                        <div>\n                            <Button onClick={onCloseDrawer} style={{ marginRight: 8 }}>\n                                Cancel\n                            </Button>\n                            <Button\n                                onClick={onCheckOut}\n                                type=\"primary\"\n                                loading={checking}\n                                disabled={loading || cartData?.orderItemList.length === 0}\n                            >\n                                Checkout\n                            </Button>\n                        </div>\n                    </div>\n                }\n            >\n                <List\n                    loading={loading}\n                    itemLayout=\"horizontal\"\n                    dataSource={cartData?.orderItemList}\n                    renderItem={(item) => (\n                        <List.Item>\n                            <List.Item.Meta\n                                title={item.menuItem.name}\n                                description={`$${item.price}`}\n                            />\n                        </List.Item>\n                    )}\n                />\n            </Drawer>\n        </>\n    );\n};\n\nexport default MyCart;"]},"metadata":{},"sourceType":"module"}